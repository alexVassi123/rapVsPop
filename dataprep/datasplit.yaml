$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json

name: data_split_and_preprocess_cli

version: 1.0.0
display_name: Data Split and Preprocess CLI
type: command
is_deterministic: true
description: |
  This component splits the dataset into training and validation sets, preprocesses the data, and saves the results to the specified output path.

environment: azureml:aml-Pillow-cli:0.1.0
resources: 
  instance_count: 1

inputs:
  input_csv:
    type: uri_file
    description: Raw CSV with columns “lyric” and “class”
  test_size:
    type: number
    default: 0.2
  random_state:
    type: integer
    default: 1234
  vocab_size:
    type: integer
    default: 5000
  max_length:
    type: integer
    default: 100
  embedding_dim:
    type: integer
    default: 100
  glove_file:
    type: uri_file
    description: GloVe embeddings (e.g. glove.6B.100d.txt)

outputs:
  output_dir:
    type: uri_folder          
    mode: rw_mount           
    description: Folder that will contain X_train_pad.npy, y_train.npy, embedding_matrix.npy, meta.json

command: >
  python datasplit.py
    --input_csv ${{inputs.input_csv}}
    --test_size ${{inputs.test_size}}
    --random_state ${{inputs.random_state}}
    --vocab_size ${{inputs.vocab_size}}
    --max_length ${{inputs.max_length}}
    --embedding_dim ${{inputs.embedding_dim}}
    --glove_file ${{inputs.glove_file}}
    --output_dir ${{outputs.output_dir}}
    